<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Weather Forecast</title>
	</head>
	<body>
		<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
		<!-- <script src="https://cdn.tailwindcss.com"></script> -->

		<div id="app">
			<h1>Plan Your Trip</h1>
			Enter your destination city to see weather forecasts and advisories for
			the next 5 days:
			<br />
			City: <input v-model="city" /> <br /><br />
			<button v-on:click="GetForecast">Get Forecast</button>
			<br />
			Latest city is {{city}}
			<br />
			<hr />
			<span v-if="forecast">
				<!-- Forecast: {{forecast.weather}} -->
				<!-- AQI: {{forecast.aqi}} -->
				<ul>
					<!-- : if there is rain anytime over the next 4-days indicate that the user should
	bring an umbrella -->
					<li>
						The forecast indicates <b>{{forecast.rainStatus}}</b> for your trip.
						<br />
					</li>
					<!-- Indicate the type of whether that the user should pack for Cold (temperatures below
	12C), Mild (temperatures from 12C to 24C inclusive) or Hot (temperatures above
	24C). -->
					<li>
						The forecast indicates the average temperature will be
						<b>{{forecast.averageTemp}}</b>C. <br />
						You should pack for <b>{{forecast.tempRange}}</b> weather.
					</li>
					<!--Give a summary table for the next 4 days showing: Temperature, Wind Speed and
	Rainfall level.  -->
					<li>
						Summary of next 5 days: <br />
						{{forecast.Summary}}
					</li>
					<!-- You can then use these in the AIR Pollution API to get the PM2_5 
	2 of 4 or the next 5 days. If this exceeds 10, then you should advise the user to
	wear a mask -->
					<li>
						The forecast indicates the average PM2.5 AQI will be
						<b>{{forecast.avgAQI}}</b>.
						<br />
						You <b>{{forecast.aqiStatus}}</b> need to bring a mask.
					</li>
					<!-- On completion of these core feature you should implement one innovative and
	creative feature which requires that is unique to your Internet Application -->
					<li></li>
				</ul>
			</span>
			<span v-if="history.length>0">
				<hr />
				<h1>History of cites checked:</h1>
				<ul>
					<li v-for="cities in history">{{cities}}</li>
				</ul>
			</span>
		</div>

		<script>
			const { createApp } = Vue;
			createApp({
				data() {
					return {
						city: "Cork",
						forecast: null,
						history: [],
					};
				},
				methods: {
					GetForecast: GetForecast,
				},
			}).mount("#app");

			function GetForecast() {
				console.log("GetForecast");
				let prom = fetch("weather/" + this.city);
				prom
					.then((response) => response.json())
					.then((response) => {
						this.forecast = response;
					});
				if (this.history.includes(this.city) == false) {
					this.history.unshift(this.city);
				}
			}
		</script>
	</body>
</html>

<!-- <div id="app">
			<h1>Welcome to the Random Number Generator</h1>
			Please enter a minimum and a maximum as the range of the Random Number
			<br />
			Minimum: <input v-model="randMin" /> <input v-model="randMax" />
			<br /><br />
			<button v-on:click="GetRand">Generate Random Number</button>
			between {{randMin}} and {{randMax}}
			<br />
			Latest Random Number is {{random}}
			<span v-if="history.length>0">
				<hr />
				<h1>History of Numbers generated</h1>
				<ul>
					<li v-for="num in history">{{num}}</li>
				</ul>
			</span>
		</div>

		<script>
			const { createApp } = Vue;
			createApp({
				data() {
					return {
						randMin: 1,
						randMax: 10,
						random: -1,
						history: [],
					};
				},
				methods: {
					GetRand: getRandom,
				},
			}).mount("#app");

			function getRandom() {
				console.log("getRandom called");
				let prom = fetch("random/" + this.randMin + "/" + this.randMax);
				prom
					.then((response) => response.json())
					.then((response) => {
						this.random = response.result;
						this.history.push(response.result);
					});
			}
		</script> -->
